<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Type Client Framework</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/TypeClient/assets/css/0.styles.ee4cc296.css" as="style"><link rel="preload" href="/TypeClient/assets/js/app.1c4c7f87.js" as="script"><link rel="preload" href="/TypeClient/assets/js/2.83958a25.js" as="script"><link rel="preload" href="/TypeClient/assets/js/5.7163d2a1.js" as="script"><link rel="prefetch" href="/TypeClient/assets/js/3.11572a76.js"><link rel="prefetch" href="/TypeClient/assets/js/4.3b6a7e49.js"><link rel="prefetch" href="/TypeClient/assets/js/6.7efefb40.js"><link rel="prefetch" href="/TypeClient/assets/js/7.6d8e80d4.js"><link rel="prefetch" href="/TypeClient/assets/js/8.8dabbbc4.js">
    <link rel="stylesheet" href="/TypeClient/assets/css/0.styles.ee4cc296.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TypeClient/" aria-current="page" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">Type Client Framework</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/TypeClient/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  首页
</a></div><div class="nav-item"><a href="/TypeClient/zh/guide.html" class="nav-link">
  介绍
</a></div><div class="nav-item"><a href="/TypeClient/zh/core.html" class="nav-link">
  核心
</a></div><div class="nav-item"><a href="/TypeClient/zh/react.html" class="nav-link">
  React
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/TypeClient/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  首页
</a></div><div class="nav-item"><a href="/TypeClient/zh/guide.html" class="nav-link">
  介绍
</a></div><div class="nav-item"><a href="/TypeClient/zh/core.html" class="nav-link">
  核心
</a></div><div class="nav-item"><a href="/TypeClient/zh/react.html" class="nav-link">
  React
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Home</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TypeClient/#why？" class="sidebar-link">Why？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/TypeClient/#stage" class="sidebar-link">Stage</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/TypeClient/#modules" class="sidebar-link">Modules</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/TypeClient/#repositories" class="sidebar-link">Repositories</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/TypeClient/#preview" class="sidebar-link">Preview</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/TypeClient/#elegant" class="sidebar-link">Elegant</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main aria-labelledby="main-title" class="home"><header class="hero"><img src="https://vuepress.vuejs.org/hero.png" alt="hero"> <h1 id="main-title">
      Type Client
    </h1> <p class="description">
      一套轻量的前端微应用开发框架
    </p> <p class="action"><a href="/TypeClient/zh/guide.html" class="nav-link action-button">
  快速上手 →
</a></p></header> <div class="features"><div class="feature"><h2>AOP</h2> <p>类似JAVA的面向切片编程，使得开发过程全面解偶。</p></div><div class="feature"><h2>iOC</h2> <p>是面向对象编程中的一种设计原则，可以用来减低计算机代码之间的耦合度。</p></div><div class="feature"><h2>Middleware</h2> <p>中间件就是匹配路由之前或者匹配路由完成之后所得一系列操作</p></div></div> <div class="theme-default-content custom content__default"><iframe src="https://codesandbox.io/embed/github/flowxjs/TypeClientReactTemplate/tree/master/?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="flowxjs/TypeClientReactTemplate" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <p>它是一套通用的路由管理的微应用架构，支持通过驱动方式接入的任意渲染架构或者库。它具有以下有点：</p> <ol><li>快速匹配路由到组件</li> <li>基于<a href="https://baike.baidu.com/item/AOP/1332219" target="_blank" rel="noopener noreferrer">AOP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>模式快速编写路由</li> <li>基于<a href="https://baike.baidu.com/item/%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC?fromtitle=Inversion+of+Control&amp;fromid=11298462" target="_blank" rel="noopener noreferrer">IOC: Inversion of Control<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>模型，快速实现服务的反转控制。</li> <li>支持中间件模型</li> <li>支持路由生命周期</li> <li>通过事件分发快速构建不同渲染架构的驱动</li> <li>轻量的体积 [gzip &lt; 30k]</li></ol> <h2 id="why？"><a href="#why？" class="header-anchor">#</a> Why？</h2> <p>前端路由一般性能不是瓶颈，但是在一些渲染架构上，比如<code>React</code>上，在量级非常大的组件下，DIFF就显得非常笨拙：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>App<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;groups&quot;</span> components<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>main<span class="token operator">:</span> Groups<span class="token punctuation">,</span> sidebar<span class="token operator">:</span> GroupsSidebar<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;users&quot;</span> components<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>main<span class="token operator">:</span> Users<span class="token punctuation">,</span> sidebar<span class="token operator">:</span> UsersSidebar<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;users/:userId&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
    <span class="token comment">// ... 10000个routers</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div><p>当匹配到的路由正巧命中最后一个，这时候<code>&lt;Route /&gt;</code>组件diff了正好10000个，相当于循环中需要匹配10000次，在不断更新的vDom上，它的性能是非常差的。</p> <p>当然有人会问实际业务场景中不可能存在如此之多的路由。是的，这确实不可能存在，但是对于性能的压榨前提下，我们需要更高性能的路由匹配模式。而<code>TypeClient</code>正好采用了高性能的字符串索引算法<a href="https://en.wikipedia.org/wiki/Radix_tree" target="_blank" rel="noopener noreferrer">radixtree<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来解决这个问题。</p> <h2 id="stage"><a href="#stage" class="header-anchor">#</a> Stage</h2> <p>其实它的确切适应场景实在复杂的后台系统中。<code>TypeClient</code>将路由与过程解偶，通过<code>Context</code>、<code>Middleware</code>以及<code>LifeCycle</code>等概念将开发流程切分开来，让开发者可以非常自由地将逻辑嵌入到所需要的过程中，而不是冗余地堆砌在一起。</p> <p>如果您熟悉<code>express</code>或者<code>koa</code>的nodejs的服务开发，那么您将非常快速地上手这个架构，您也会在使用架构的过程中享受到服务端开发模式带来的乐趣。</p> <blockquote><p>其实<code>TypeClient</code>的流程化思想来源于后端，正如<code>nestjs</code>的思想来源于<code>Angular</code>一样。</p></blockquote> <p>对于轻量级应用，您也是可以使用的，它基本涵盖所有路由使用场景。对于路由非强依赖的项目，它的优势仅突出在过程解偶上。所以，使用此架构请先确定项目是否真的需要用到它。</p> <h2 id="modules"><a href="#modules" class="header-anchor">#</a> Modules</h2> <ol><li><input type="checkbox" checked="checked" disabled="disabled"> <strong>@typeclient/core</strong> 核心模块</li> <li><input type="checkbox" checked="checked" disabled="disabled"> <strong>@typeclient/react</strong> react支持的驱动</li> <li><input type="checkbox" disabled="disabled"> <strong>@typeclient/vue</strong> vue支持的驱动</li> <li><input type="checkbox" checked="checked" disabled="disabled"> <strong>@typeclient/axios</strong> axios请求支持</li> <li><input type="checkbox" checked="checked" disabled="disabled"> <strong>@typeclient/responsive</strong> 持久化存储支持 <code>localStorage</code> <code>sessionStorage</code> and <code>cookie</code></li></ol> <blockquote><p><code>@typeclient/vue</code> 将在vue3发布正式版后开源。</p></blockquote> <h2 id="repositories"><a href="#repositories" class="header-anchor">#</a> Repositories</h2> <ul><li><a href="https://github.com/flowxjs/TypeClient" target="_blank" rel="noopener noreferrer">TypeClient<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 核心架构仓库</li> <li><a href="https://github.com/flowxjs/TypeClientReactTemplate" target="_blank" rel="noopener noreferrer">TypeClientReactTemplate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> react项目模板仓库</li></ul> <h2 id="preview"><a href="#preview" class="header-anchor">#</a> Preview</h2> <p>我们可以优先预览下它的写法，我们以<code>React</code>为例：</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// index.ts</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> bootstrp<span class="token punctuation">,</span> usePopStateHistoryMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@typeclient/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ReactApplication <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@typeclient/react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CustomController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./controller'</span><span class="token punctuation">;</span>

<span class="token comment">// 使用HTML5的popstate模式，默认使用hashchange模式</span>
<span class="token function">usePopStateHistoryMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReactApplication</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  prefix<span class="token operator">:</span> <span class="token string">'/'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 注册controller</span>
app<span class="token punctuation">.</span><span class="token function">setController</span><span class="token punctuation">(</span>CustomController<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 当过程捕获错误时候我们返回一个ReactElement渲染在页面上</span>
app<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Error on </span><span class="token punctuation">{</span>ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>pathname<span class="token punctuation">}</span><span class="token plain-text">:</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>err<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">;
});

// 当没有匹配到路由的时候
app.onNotFound(req =&gt; </span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Not Found:</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    find on </span><span class="token punctuation">{</span>req<span class="token punctuation">.</span>pathname<span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">;
});

// 启动服务
bootstrp();
</span></code></pre></div><blockquote><p>您也可以通过 <code>new ReactApplication()</code> 创建多个实例在一个页面上。</p></blockquote> <p>以上是一个启动文件，我们来看一下路由文件：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// controller.tsx</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Controller<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@typeclient/core'</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CustomController</span> <span class="token punctuation">{</span>
  @<span class="token function">Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">test</span><span class="token punctuation">(</span>ctx<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Hello world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>启动项目后你可以在页面上看到<code>Hello world!</code>。</p> <h2 id="elegant"><a href="#elegant" class="header-anchor">#</a> Elegant</h2> <p>确实，看起来非常优雅的写法。当然在preview demo上看到的只是最简单的使用。如果需要了解更多，请参考官方文档。</p> <blockquote><p>TypeClient 提供给你的是另一种前端项目开发的模式，请不要局限在社区开源的全家桶，您应该尽可能地学习到更多社区意外好的设计以及思想。</p></blockquote></div> <div class="footer">
    MIT Licensed | Copyright © 2020-present Evio Shen
  </div></main></div><div class="global-ui"></div></div>
    <script src="/TypeClient/assets/js/app.1c4c7f87.js" defer></script><script src="/TypeClient/assets/js/2.83958a25.js" defer></script><script src="/TypeClient/assets/js/5.7163d2a1.js" defer></script>
  </body>
</html>
